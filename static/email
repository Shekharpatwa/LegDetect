user = User.objects.get(username=username)
user_email = User.objects.get(email=email)
if username == user:
    messages.error(request,"Username already exits")
    return render(request,'Homepage.html')
if email == user_email:
    messages.error(request,"Email already exits")
    return render(request,'Homepage.html')



data=User.objects.all()
	z=0
	for i in data:
    	if i.email==email:
    		z=1
			break
	if z==1:
        messages.ERROR(request,"Email already exists")
    	return render(request,"Homepage.html",{"Variable":"Email id already exists"})


		#  username = request.POST['username']
		#  imgRes1 = request.POST['imgRes1']
		#  imgRes2 = request.POST['imgRes2']
		#  username = request.POST.get('username')
		#  imgRes1 = request.POST.get('imgRes1')
		#  imgRes2 = request.POST.get('imgRes2')
		#  print(username,imgRes1,imgRes2)
		#  print(username,imgRes1,imgRes2)
			username = request.POST['username']
			imgRes1 = request.POST['imgRes1']
			imgRes2 = request.POST['imgRes2']
			print(username,imgRes1,imgRes2)

			img_Result = imageResult(username=username,imgRes1=imgRes1,imgRes2=imgRes2)
			img_Result.save()

			img_Result = imageResult(user=username,imgRes1=imgRes1,imgRes2=imgRes2,date=datetime.today())
					img_Result.save()
					messages.success(request,'Stored successfully') 



def Detection_img(request):
    	if request.method == "POST":
		# # username = request.POST['username']
		# # imgRes1 = request.POST['imgRes1']
		# # imgRes2 = request.POST['imgRes2']
		# username = request.POST.get('username')
		# imgRes1 = request.POST.get('imgRes1')
		# imgRes2 = request.POST.get('imgRes2')
		# # print(username,imgRes1,imgRes2)
		# print(username,imgRes1,imgRes2)

		# img_Result = imageResult(user=username,imgRes1=imgRes1,imgRes2=imgRes2,date=datetime.today())
		# img_Result.save()
		# messages.success(request,'Stored successfully') 

		# username = request.POST['username']
		# imgRes1 = request.POST['imgRes1']
		# imgRes2 = request.POST['imgRes2']
		# print(username,imgRes1,imgRes2)

		# img_Result = imageResult(username=username,imgRes1=imgRes1,imgRes2=imgRes2)
		# img_Result.save()
		    # user = User.objects.get(username=username)
			# user_email = user.email

		RESULT = request.POST['RESULT']

			user_email = User.objects.get(email=email)
		    send_mail('Your result of detection',mail_message,settings.EMAIL_HOST_USER,[user_email],fail_silently=False)
	
	return render(request, 'Detection_img.html') 
 

def test(request):
    if request.method == "POST":
    	message = request.POST['message']
	    send_mail('Password Reset Request',message,settings.EMAIL_HOST_USER,['shekharpatwa2001@gmail.com'],fail_silently=False)
		
    return render(request,'test.html')


user_email = User.objects.all()
for i in user_email:
    email_id = i.email
	break


# def live_Res(request):
#     if request.method == 'POST':
#     	username = request.POST.get('username')
# 	   	LiveRes1 = request.POST.get('LiveRes1')
# 	   	LiveRes2 = request.POST.get('LiveRes2')
# 	   	live_Res = liveResult(user=username,LiveRes1=LiveRes1,LiveRes2=LiveRes2,date=datetime.today())
# 	   	live_Res.save()
    
#     return render(request, 'Detection_Live.html')  

def live_Res(request):
	if request.method == 'POST':
    	username = request.POST['username']
	    LiveRes1 = request.POST['LiveRes1']
	    LiveRes2 = request.POST['LiveRes2']
	    live_res = liveResult(username=username,LiveRes1=LiveRes1,LiveRes2=LiveRes2,date=datetime.today())
	    live_Res.save()


def Detection_Live(request):
    if request.method == 'POST':
        username = request.POST['username']
        LiveRes1 = request.POST['LiveRes1']
        LiveRes2 = request.POST['LiveRes2']
        live_res = liveResult(username=username,LiveRes1=LiveRes1,LiveRes2=LiveRes2,date=datetime.today())
        live_Res.save()

    return render(request,'Detection_Live.html')

def testing(request):
	if request.method == 'POST':
        username = request.POST['username']
        LiveRes1 = request.POST['LiveRes1']
        LiveRes2 = request.POST['LiveRes2']
        print(username,LiveRes1,LiveRes2)
        live_res = liveResult(username=username,LiveRes1=LiveRes1,LiveRes2=LiveRes2,date=datetime.today())
        live_Res.save()
	
	return render(request,'testing.html')


def testing(request):
    if request.method == 'POST':
        username = request.POST.get('username')
        print(username)
        live_res = liveResult(username=username,date=datetime.today())
        live_Res.save()
	
    return render(request,'testing.html')


def testing(request):
    if request.method == 'POST':
        name = request.POST['name']
        messagea = request.POST['messagea']
        tests = Testing(name=name,resu=messagea)
        tests.save()
	
    return render(request,'testing.html')



def Detection_img(request):
	if request.method == 'POST':
	    name = request.POST.get('name')
    	imgRes1 = request.POST.get('imgRes1')
    	imgRes2 = request.POST.get('imgRes2')
	    print(name)
	    repo = Report(name=name)
	    repo.save()
	
	return render(request,'Detection_img.html')


def UserProfile(request):
    Reports = Testing.objects.all()
    context = {'Report':Reports}
    for item in Reports:
       print(item.name)
    print(context)
    return render(request,'UserProfile.html',context)

def Detection_Live(request):
	if request.method == "POST":
    	name = request.POST['name']
    	Langle = request.POST['Langle']
	    Rangle = request.POST['Rangle']
		# # print(username,imgRes1,imgRes2)
		# print(username,imgRes1,imgRes2)

		# send_mail('Your result of detection',username,settings.EMAIL_HOST_USER,['shekharpatwa2001@gmail.com'],fail_silently=False)
		
	    Result = LiveRes(name=name,LiveLeftAngle=Langle,LiveRightAngle=Rangle,date=datetime.today())
    	Result.save()
	return render(request,'Detection_Live.html')

def Detection_Live(request):
	if request.method == "POST":
		name = request.POST['name']
		Langle = request.POST['Langle']
		Rangle = request.POST['Rangle']

		Result = LiveRes(name=name,LiveLeftAngle=Langle,LiveRightAngle=Rangle,date=datetime.today())
		Result.save()

	return render(request,'Detection_Live.html')




	# def Detection_Live(request):
# 	if request.method == "POST":
#     	name = request.POST['name']
#     	Langle = request.POST['Langle']
# 	    Rangle = request.POST['Rangle']
# 		# # print(username,imgRes1,imgRes2)
# 		# print(username,imgRes1,imgRes2)

# 		# send_mail('Your result of detection',username,settings.EMAIL_HOST_USER,['shekharpatwa2001@gmail.com'],fail_silently=False)
		
# 	    Result = LiveRes(name=name,LiveLeftAngle=Langle,LiveRightAngle=Rangle,date=datetime.today())
#     	Result.save()
# 	return render(request,'Detection_Live.html')

# def Detection_img(request):
#     return render(request,'Detection_img.html')

<footer>
        <div class="footer">
          <label for="phone no" class="form-label"><h3>Phone no: <u>9324170787</u> , <u>9324599096</u> </h3></label> <br>
          <label for="emailid" class="form-label"> <h3>Email ID: <u> legdetect1229@gmail.com</u></h3> </label>

        </div>
      </footer>

{% comment %} <iframe width="900" height="506" src="https://www.youtube.com/embed/FDsftw2yrAg" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe> {% endcomment %}

{% comment %} <iframe width="590" height="360" src="https://www.youtube.com/embed/lntFFGvq8MM" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe> {% endcomment %}
{% comment %} 
<iframe width="590" height="360" src="https://www.youtube.com/embed/rihfPP6BnN0" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe> {% endcomment %}

{% comment %} <iframe width="900" height="506" src="https://www.youtube.com/embed/SRinXGN3bZs" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe> {% endcomment %}


{% comment %} <iframe width="900" height="506" src="https://www.youtube.com/embed/aHho-ZpSXlE" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe> {% endcomment %}







# def testing(request):
#     if request.method == 'POST':
#         # username = request.POST.get('username')
#         # message = request.POST.get('message')
#         username = request.POST['username']
#         # messagea = request.POST['messagea']
#         # LiveRes1 = request.POST.get('LiveRes1')
#         # LiveRes2 = request.POST.get('LiveRes2')
#         print(username)
#         live_res = liveResult(username=username,date=datetime.today())
#         live_Res.save()
	
#     return render(request,'testing.html')


# def testing(request):
#     if request.method == 'POST':
#         user = request.POST['user']
#         print(user)
#         live_Res = liveResult(user=user,date=datetime.today())
#         live_Res.save()
	
#     return render(request,'testing.html')

# def testing(request):
#     if request.method == 'POST':
#         name = request.POST.get('name')
#         resu = request.POST.get('resu')
#         tests = Testing(name=name,resu=resu)
#         tests.save() 
	
#     return render(request,'testing.html') 


# def test(request):
#     if request.method == "POST":
#     	message = request.POST['message']
# 	    send_mail('Password Reset Request',message,settings.EMAIL_HOST_USER,['shekharpatwa2001@gmail.com'],fail_silently=False)

#     return render(request,'test.html')

# def Detection_img(request):
# 	if request.method == 'POST':
#     	name = request.POST.get('name')
#     	imgRes1 = request.POST.get('imgRes1')
#     	imgRes2 = request.POST.get('imgRes2')
# 	    print(name)
# 	    repo = Report(name=name)
# 	    repo.save()
	
# 	return render(request,'Detection_img.html')


					
# def live_Res(request):
#     if request.method == 'POST':
#     	username = request.POST.get('username')
# 	   	LiveRes1 = request.POST.get('LiveRes1')
# 	   	LiveRes2 = request.POST.get('LiveRes2')
# 	   	live_Res = liveResult(user=username,LiveRes1=LiveRes1,LiveRes2=LiveRes2,date=datetime.today())
# 	   	live_Res.save()
    
#     return render(request, 'Detection_Live.html')  


   # Reports = ImageRes.objects.all()
    # context = {'Report':Reports}
    # for item in Reports:
    #    print(item.ImgLeftAngle)
    # print(context)
    # return render(request,'UserProfile.html')

	# return redirect('Homepage') 

	# logout(request)
	# return HttpResponseRedirect('Homepage')

# def UserProfile(request):
#     return render(request,'UserProfile.html')

		# mail_message = "Hello User how are you"
		# user = User.objects.get(username=username)
		# profile = Profile.objects.get(user=user)
		# user_email = user.email



# SPINNER

    // const spinner = document.getElementById('spinner');
    // const imgdet = document.getElementById('img');

    //     $.ajax({
    //         type: 'GET',
    //         url:'/Detection_img',
    //         success: function(res){
    //             setTimeout(() => {

    //                 spinner.classList.add('no-display')
    //                 console.log('success2');
    //                 imgdet.innerHTML += `
    //                 <div class="imgdetect" style="justify-content: center; display: flex; margin-top: 30px;">
    //                 <img src="{% url 'image_feed' %}">
    //                 </div>`
    //                 // spinner.classList.add('no-display')
    //                 // $('#spinner').hide();
    //             },400);
    //         },
    //         error:function(er){
    //             console.log('error')
    //         },
    //     })


#Password Length
if len(pass1) < 8:
    messages.error(request, 'Password must be greater than 8 characters')
    print(messages.error(request, 'Password must be greater than 8 characters'))
	return redirect('Homepage')

if len(pass1) > 15:
    		messages.error(request, 'Password must not be greater 15 characters')
		    print(messages.error(request, 'Password must not be greater 15 characters'))
		    return redirect('Homepage')

if len(pass1) <8:
	messages.error(rrequest, 'Password must be greater than 8 charaters')
	print(messages.error(rrequest, 'Password must be greater than 8 charaters'))
    return redirect('Homepage')

if len(pass1) >15:
    messages.error(rrequest, 'Password must not be greater 15 characters')
    print(messages.error(rrequest, 'Password must not be greater 15 characters'))
    return redirect('Homepage')



def test(request):
    if request.method == "POST":
    	message = request.POST['message']
    	send_mail('Password Reset Request',message,settings.EMAIL_HOST_USER,['shekharpatwa2001@gmail.com'],fail_silently=False)
    return render(request,'test.html')